import{r as e,j as a,c as l,a as t,m as r,n,b as i,F as s,g as o}from"./app-55aa7177.js";import{A as d}from"./AuthenticatedLayout-15abc37b.js";import{F as c}from"./index.es-e0312cba.js";import{u,c as m,a as p}from"./index.esm-fd5c7a63.js";import{M as h}from"./Modal-33b227f1.js";import{W as g}from"./WhatsAppUiPreview-0e7d8ea2.js";import{AddEventButton as v}from"./EventItem-e2c95f98.js";import"./ApplicationLogo-7635b2b3.js";import"./transition-1b81608f.js";import"./dialog-ef626948.js";import"./ScrollScreen-6240e508.js";import"./moment-0b360bb8.js";const y=({title:r,subtitle:n,addButton:i,filterSearch:s,pagination:o,columns:d,data:u,filters:m,onChangeFilter:p,filterOptions:h,filterOptionsComponent:g})=>{const[v,y]=e.useState((null==m?void 0:m.search)||""),f=e=>{e>0&&(m.current_page=e,p(m))};return a(l.Card,{className:"h-full w-full p-4",children:[t(l.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:a("div",{className:"mb-8 flex items-center justify-between gap-8",children:[a("div",{children:[r&&t(l.Typography,{variant:"h5",color:"gray",children:r}),n&&t(l.Typography,{color:"gray",className:"mt-1 font-normal",children:n})]}),t("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:i})]})}),a(l.CardBody,{className:"overflow-scroll px-0",children:[a("div",{className:"grid grid-cols-2 content-between gap-4 md:flex-row",children:[t("div",{className:"flex justify-between gap-2",children:h&&g}),s&&t("div",{className:"flex justify-end",children:a("div",{className:"relative w-full max-w-[24rem] md:w-72",children:[t(l.Input,{type:"text",label:"Search",value:v,onChange:e=>y(e.target.value),className:"pr-20",containerProps:{className:"min-w-0"}}),a(l.Button,{onClick:()=>{m.current_page=1,m.search=v,p(m)},size:"sm",color:"blue",className:"!absolute right-1 top-1 rounded flex items-center gap-3",children:[t(c,{icon:"fa-solid fa-magnifying-glass"}),"Search"]})]})})]}),a("table",{className:"mt-4 w-full min-w-max table-auto text-left",children:[t("thead",{children:t("tr",{children:null==d?void 0:d.map((e=>t("th",{className:"border-y border-gray-100 bg-gray-50/50 p-4 "+((null==e?void 0:e.center)?"text-center":""),style:{width:` ${(null==e?void 0:e.width)||""}`},children:t(l.Typography,{variant:"small",color:"gray",className:"font-normal leading-none opacity-70",children:e.name})},e.name)))})}),t("tbody",{children:(null==u?void 0:u.length)?null==u?void 0:u.map(((e,a)=>{const l=a===u.length-1?"p-4":"p-4 border-b border-gray-50";return t("tr",{children:null==d?void 0:d.map(((r,n)=>t("td",{className:`${l} ${(null==r?void 0:r.center)?"text-center":""}`,style:{width:` ${(null==r?void 0:r.width)||""}`},children:(null==r?void 0:r.cell)?null==r?void 0:r.cell(e,a):(null==r?void 0:r.selector)?null==r?void 0:r.selector(e):""},`col-${n}`)))},`row-${a}`)})):t("tr",{children:t("td",{colSpan:null==d?void 0:d.length,className:"p-4 text-center",children:"Tidak ada data"})})})]})]}),o&&a(l.CardFooter,{className:"flex items-center justify-between border-t border-gray-50 p-4",children:[a(l.Typography,{variant:"small",color:"gray",className:"font-normal",children:["Page ",o.currentPages," of"," ",null==o?void 0:o.totalPages]}),a("div",{className:"flex gap-2",children:[t(l.Button,{disabled:!o.prevPageUrl,onClick:()=>f(o.currentPages-1),variant:"outlined",color:"gray",size:"sm",children:"Previous"}),t(l.Button,{disabled:!o.nextPageUrl,onClick:()=>f(o.currentPages+1),variant:"outlined",color:"gray",size:"sm",children:"Next"})]})]})]})},f=({auth:f,meta:b,events:x,waTemplate:N})=>{var w;const[_,S]=e.useState(!1),[C,T]=e.useState(!1),[B,P]=e.useState(null),[j,k]=e.useState(1),[z,A]=e.useState(5),[I,F]=e.useState(""),[H,V]=e.useState(null==(w=x[0])?void 0:w.id),$=r({page:j,per_page:z,search:I,filter_event_id:H},{skip:!(j>0)}),[D,O]=n(),W=u({initialValues:{password:"",id:""},validationSchema:m().shape({password:p().trim().max(255).required()}),onSubmit:e=>{D(e)}}),E=u({initialValues:{whatsapp:"",message:""},onSubmit:e=>{}});e.useEffect((()=>{O.isSuccess&&G()}),[O.isSuccess]);const U=()=>{o.get(route("invitations.create"))},q=e=>{F(null==e?void 0:e.search),k(null==e?void 0:e.current_page),A(null==e?void 0:e.per_page),V(null==e?void 0:e.filter_event_id)},G=()=>{W.resetForm(),S(!1),P(null)},L=()=>{E.resetForm(),T(!1),P(null)};return a(d,{user:f.user,header:t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:b.title}),children:[t(i,{title:b.head}),x.length>0?a(s,{children:[$.isSuccess&&t(y,{title:"Invitation Data",columns:[{name:"No",width:"5vw",center:!0,cell:(e,a)=>{var l,t;return((null==(l=$.data)?void 0:l.data.current_page)-1)*(null==(t=$.data)?void 0:t.data.per_page)+(a+1)}},{name:"Greeting",selector:e=>e.greeting},{name:"Full Name",selector:e=>{let a="";if("VIP"==e.inv_type)a="orange";else{if("VVIP"!=e.inv_type)return t(l.Typography,{color:"blue-gray",className:"font-normal",children:e.fullname});a="green"}return t(l.Badge,{content:e.inv_type,color:a,children:t(l.Typography,{color:"blue-gray",className:"font-normal pr-4",children:e.fullname})})}},{name:"WhatsApp Number",selector:e=>`+62-${e.whatsapp}`},{name:"Guest (Max)",selector:e=>e.guest_max,center:!0},{name:"Labels",selector:e=>e.labels,center:!0},{name:"Status",width:"20vw",cell:e=>a("div",{className:"flex flex-col gap-3",children:[a("div",{className:"grid grid-cols-5 gap-3",children:[t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:"Delivered"}),t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:":"}),t(l.Chip,{className:"text-center col-span-3",size:"sm",variant:"ghost",value:1==e.delivered_status?"Terkirim":2==e.delivered_status?"Gagal":"Belum Dikirim",color:1==e.delivered_status?"green":2==e.delivered_status?"red":"blue-gray"})]}),a("div",{className:"grid grid-cols-5 gap-3",children:[t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:"RSVP"}),t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:":"}),t(l.Chip,{className:"text-center col-span-3",size:"sm",variant:"ghost",value:1==e.rsvp_status?"Bisa Hadir":2==e.rsvp_status?"Tidak Bisa Hadir":"Belum Respon",color:1==e.rsvp_status?"green":2==e.rsvp_status?"red":"blue-gray"})]}),a("div",{className:"grid grid-cols-5  gap-3",children:[t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:"Arrived"}),t(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:":"}),t(l.Chip,{className:"text-center col-span-3",size:"sm",variant:"ghost",value:1==e.arrived_status?"Hadir":2==e.arrived_status?"Tidak Hadir":"Belum Hadir",color:1==e.arrived_status?"green":2==e.arrived_status?"red":"blue-gray"})]})]})},{name:"Action",center:!0,cell:(e,r)=>a(s,{children:[t(l.Tooltip,{content:"Kirim Pesan WhatsApp",children:t(l.IconButton,{variant:"text",color:"blue-gray",onClick:()=>(e=>{P(e),T(!0)})(e),children:t(c,{icon:"fa-brands fa-whatsapp",size:"2x"})})}),t(l.Tooltip,{content:"Edit",children:t(l.IconButton,{variant:"text",color:"blue-gray",onClick:()=>{return a=e.id,void o.get(route("invitations.edit",{id:a}));var a},children:t(c,{icon:"fa-solid fa-pen-to-square",size:"2x"})})}),t(l.Tooltip,{content:"Delete",children:t(l.IconButton,{variant:"text",color:"blue-gray",onClick:()=>(e=>{P(e),W.setFieldValue("id",e.id),S(!0)})(e),children:t(c,{icon:"fa-solid fa-trash",size:"2x"})})})]})}],data:null==(R=null==(M=$.data)?void 0:M.data)?void 0:R.data,filters:{search:I,current_page:j,per_page:z,filter_event_id:H},pagination:{currentPages:null==(K=$.data)?void 0:K.data.current_page,totalPages:null==(J=$.data)?void 0:J.data.last_page,nextPageUrl:null==(Q=$.data)?void 0:Q.data.next_page_url,prevPageUrl:null==(X=$.data)?void 0:X.data.prev_page_url},onChangeFilter:q,filterSearch:!0,filterOptions:!0,filterOptionsComponent:t(s,{children:x&&t(l.Select,{label:"Invited to Event",value:H,onChange:e=>V(e),className:"",children:null==x?void 0:x.map((e=>t(l.Option,{value:e.id,children:e.event_name},e.id)))})}),addButton:a(l.Button,{onClick:U,className:"flex items-center gap-3",color:"blue",size:"sm",children:[t(c,{icon:"fa-solid fa-user-plus"})," Add Invitation"]})}),t(h,{show:_,onClose:G,children:a("form",{onSubmit:W.handleSubmit,className:"p-6",children:[t("h2",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to delete this event ?"}),t("p",{className:"mt-1 text-sm text-gray-600",children:"Once your event is deleted, all of its resources and data will be permanently deleted. Please enter your password to confirm you would like to permanently delete event."}),a("div",{className:"mt-6",children:[t(l.Input,{size:"lg",label:"Password",type:"password",...W.getFieldProps("password"),error:!(!W.errors.password||!W.touched.password)}),W.errors.password&&W.touched.password&&t(l.Typography,{variant:"small",color:"red",className:"flex items-center gap-1 font-normal mt-2",children:W.errors.password})]}),a("div",{className:"mt-6 flex justify-end gap-3",children:[t(l.Button,{onClick:G,variant:"outlined",color:"gray",size:"sm",children:"Cancel"}),t(l.Button,{type:"submit",color:"red",size:"sm",children:"Delete Event"})]})]})}),t(h,{show:C,onClose:L,children:a("form",{onSubmit:W.handleSubmit,className:"p-6",children:[t(l.Typography,{variant:"h2",color:"gray",className:"text-lg font-medium",children:"Send WhatsApp Invitation"}),(null==N?void 0:N.length)&&a(l.Tabs,{value:N[0].id,children:[t(l.TabsHeader,{children:null==N?void 0:N.map((({id:e,template_name:a})=>t(l.Tab,{value:e,children:a},e)))}),t(l.TabsBody,{children:null==N?void 0:N.map((e=>t(l.TabPanel,{value:e.id,children:t(g,{data:e,selectedData:B,scrollHeight:"450px"})},e.id)))})]}),a("div",{className:"mt-6 flex justify-end gap-3",children:[t(l.Button,{onClick:L,variant:"outlined",color:"gray",size:"sm",children:"Cancel"}),t(l.Button,{type:"submit",color:"green",size:"sm",children:"Send WhatsApp"})]})]})})]}):t(v,{onAddButtonClick:()=>o.get(route("events.create"))})]});var M,R,K,J,Q,X};export{f as default};
